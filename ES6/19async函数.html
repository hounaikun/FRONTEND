<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
    <script>
        /*
        * async 函数是什么？
        *   一句话，它就是 Generator 函数的语法糖。
        * async函数对 Generator 函数的改进，体现在以下四点:
        *   1.Generator 函数的执行必须靠执行器，而async函数自带执行器。也就是说，async函数的执行，与普通函数一模一样，只要一行。
        *   2.async和await，比起星号和yield，语义更清楚了。async表示函数里有异步操作，await表示紧跟在后面的表达式需要等待结果。
        *   3.而async函数的await命令后面，可以是 Promise 对象和原始类型的值（数值、字符串和布尔值，但这时会自动转成立即 resolved 的 Promise 对象）
        *   4.async函数的返回值是 Promise 对象，这比 Generator 函数的返回值是 Iterator 对象方便多了。你可以用then方法指定下一步的操作。
        * */
        function getUsers() {
            return new Promise(function (resolve,reject){
                setTimeout(function () {
                    let data = '用户数据'
                    resolve(data)
                },1000)
            })
        }
        function getOrders(user) {
            return new Promise(function (resolve,reject){
                setTimeout(function () {
                    let data = "通过"+user.slice(-4)+"得到订单数据"
                    resolve(data)
                },1000)
            })
        }
        function getGoods(order) {
            return new Promise(function (resolve,reject){
                setTimeout(function () {
                    let data = "通过"+order.slice(-4)+"得到订单数据"
                    resolve(data)
                },1000)
            })
        }
        async function main() {
            //获取用户数据
            let user = await getUsers()
            console.log(user);
            let order = await getOrders(user)
            console.log(order);
            let goods = await getGoods(order)
            console.log(goods);
        }
        main()
    </script>
</body>
</html>